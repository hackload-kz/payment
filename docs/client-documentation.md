# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ API –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —à–ª—é–∑–∞ PaymentGateway

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø–ª–∞—Ç–µ–∂–∞](#–∂–∏–∑–Ω–µ–Ω–Ω—ã–π-—Ü–∏–∫–ª-–ø–ª–∞—Ç–µ–∂–∞)
2. [–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è](#–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
3. [–ö–æ–¥—ã –æ—à–∏–±–æ–∫](#–∫–æ–¥—ã-–æ—à–∏–±–æ–∫)
4. [API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã](#api-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)
5. [–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤](#–ø—Ä–∏–º–µ—Ä—ã-–∑–∞–ø—Ä–æ—Å–æ–≤)

---

## –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø–ª–∞—Ç–µ–∂–∞

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å—Ç–∞–¥–∏—è–º–∏:

### –°—Ç–∞–¥–∏–∏ –ø–ª–∞—Ç–µ–∂–∞

```mermaid
graph TD
    A[–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –º–µ—Ä—á–∞–Ω—Ç–∞] --> B[–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞]
    B --> C[–û–∂–∏–¥–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã NEW]
    C --> D[–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è AUTHORIZED]
    D --> E[–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ CONFIRMED]
    D --> F[–û—Ç–º–µ–Ω–∞ CANCELLED]
    E --> G[–í–æ–∑–≤—Ä–∞—Ç REFUNDED]
    C --> H[–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ FAILED]
    C --> I[–ò—Å—Ç–µ—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ EXPIRED]
```

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–µ—Ä—á–∞–Ω—Ç–∞ (–ö–æ–º–∞–Ω–¥–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç. –†–µ–∫–≤–∏–∑–∏—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ https://hub.hackload.kz)
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç**: `POST /api/v1/TeamRegistration/register`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –º–µ—Ä—á–∞–Ω—Ç–∞ –¥–ª—è –ø—Ä–∏–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª—É—á–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è API

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç**: `POST /api/v1/PaymentInit/init`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –Ω–∞–º–µ—Ä–µ–Ω–∏—è
- **–°—Ç–∞—Ç—É—Å**: `NEW`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: URL –¥–ª—è –æ–ø–ª–∞—Ç—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–º

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
- **–ü—Ä–æ—Ü–µ—Å—Å**: –ü–æ–∫—É–ø–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –Ω–∞ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Ñ–æ—Ä–º–µ
- **–°—Ç–∞—Ç—É—Å**: `NEW` ‚Üí `AUTHORIZED`
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: PCI DSS compliant –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç**: `POST /api/v1/PaymentConfirm/confirm`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞ –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤
- **–°—Ç–∞—Ç—É—Å**: `AUTHORIZED` ‚Üí `CONFIRMED`

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç**: `POST /api/v1/PaymentCheck/check`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: –ü–æ–∏—Å–∫ –ø–æ PaymentId –∏–ª–∏ OrderId

### 6. –û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç**: `POST /api/v1/PaymentCancel/cancel`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–º–µ–Ω–∞, —Ä–µ–≤–µ—Ä—Å –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—Ç –ø–ª–∞—Ç–µ–∂–∞
- **–¢–∏–ø—ã**: –û—Ç–º–µ–Ω–∞ (NEW), –†–µ–≤–µ—Ä—Å (AUTHORIZED), –í–æ–∑–≤—Ä–∞—Ç (CONFIRMED)

---

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SHA-256 HMAC –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∞—Ç–∞–∫.

### –ê–ª–≥–æ—Ä–∏—Ç–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞ (–£–ü–†–û–©–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø)

**–ö—Ä–∞—Ç–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞**: `Token = SHA256(Amount + Currency + OrderId + Password + TeamSlug)`

#### –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º:

**–í–ê–ñ–ù–û**: –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–ø—Ä–æ—â–µ–Ω–Ω—É—é —Å—Ö–µ–º—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å **—Ç–æ–ª—å–∫–æ 5 –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏**.

**‚ö†Ô∏è –ò–°–ö–õ–Æ–ß–ï–ù–ò–ï**: –≠–Ω–¥–ø–æ–∏–Ω—Ç `PaymentCheck` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–°–ü–ï–¶–ò–ê–õ–¨–ù–£–Æ** —Ñ–æ—Ä–º—É–ª—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

1. **–°–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**: –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ 5 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**:
   - ‚úÖ **Amount** - —Å—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö
   - ‚úÖ **Currency** - –≤–∞–ª—é—Ç–∞ –ø–ª–∞—Ç–µ–∂–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "RUB")
   - ‚úÖ **OrderId** - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–∞
   - ‚úÖ **TeamSlug** - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–º–∞–Ω–¥—ã
   - ‚úÖ **Password** - –ø–∞—Ä–æ–ª—å –∫–æ–º–∞–Ω–¥—ã (–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
   - ‚ùå **–ò—Å–∫–ª—é—á–∞—é—Ç—Å—è**: –í–°–ï –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (Description, Email, URLs, etc.)

2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è**: –ö 4 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –∑–∞–ø—Ä–æ—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è `Password` –∫–æ–º–∞–Ω–¥—ã

3. **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫**: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã **–í–°–ï–ì–î–ê** –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Å—Ç—Ä–æ–≥–æ–º –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:
   - **–ö–†–ò–¢–ò–ß–ù–û**: `Amount` ‚Üí `Currency` ‚Üí `OrderId` ‚Üí `Password` ‚Üí `TeamSlug`
   - –≠—Ç–æ—Ç –ø–æ—Ä—è–¥–æ–∫ –ù–ï –º–µ–Ω—è–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –≤ JSON –∑–∞–ø—Ä–æ—Å–µ

### üîê –°–ü–ï–¶–ò–ê–õ–¨–ù–ê–Ø –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–Ø –î–õ–Ø PaymentCheck

**–≠–Ω–¥–ø–æ–∏–Ω—Ç**: `POST /api/v1/PaymentCheck/check`

**‚ö†Ô∏è –í–ê–ñ–ù–û**: PaymentCheck –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–û–¢–õ–ò–ß–ù–£–Æ** –æ—Ç –¥—Ä—É–≥–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ —Ñ–æ—Ä–º—É–ª—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

**–§–æ—Ä–º—É–ª–∞**: `Token = SHA256(PaymentId + Password + TeamSlug)`

**–ü–æ—Ä—è–¥–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**: `PaymentId` ‚Üí `Password` ‚Üí `TeamSlug` (–ù–ï –∞–ª—Ñ–∞–≤–∏—Ç–Ω—ã–π!)

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ PaymentCheck –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:

1. **–¢–æ–ª—å–∫–æ 3 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞**: PaymentId, Password, TeamSlug
2. **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫**: PaymentId ‚Üí Password ‚Üí TeamSlug (–ù–ï –∞–ª—Ñ–∞–≤–∏—Ç–Ω—ã–π)
3. **PaymentId –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω**: –ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PaymentId

4. **–ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π**: –ó–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∏—Ä—É—é—Ç—Å—è –±–µ–∑ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π
   - –ü—Ä–∏–º–µ—Ä: `"19200" + "RUB" + "order-123" + "MyPassword123" + "my-team"`
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: `"19200RUBorder-123MyPassword123my-team"`

5. **SHA-256 —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö –ø–æ–ª—É—á–∏–≤—à–µ–π—Å—è —Å—Ç—Ä–æ–∫–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è SHA-256 —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π UTF-8
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å—Ç—Ä–æ–∫–∞ –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ (hex)

#### –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π —Å—Ö–µ–º—ã:

- **–¢–æ–ª—å–∫–æ 5 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**: –ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ JSON –∑–∞–ø—Ä–æ—Å–∞, –≤ —Ç–æ–∫–µ–Ω–µ —É—á–∞—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ Amount, Currency, OrderId, Password, TeamSlug
- **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π**: Description, Email, URLs, Receipt, Data –∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –ù–ï –≤–ª–∏—è—é—Ç –Ω–∞ —Ç–æ–∫–µ–Ω
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: –ù–µ –Ω—É–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–ø—Ä–æ—Å–∞ - –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ 5 –ø–æ–ª–µ–π
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –¢–æ–∫–µ–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∏ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü—Ä–∏–º–µ—Ä –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞ (–£–ü–†–û–©–ï–ù–ù–ê–Ø –°–•–ï–ú–ê)

```bash
# –ò—Å—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Ç–æ–ª—å–∫–æ 5 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö)
amount="19200"
currency="RUB"
orderId="21090"
teamSlug="MerchantTeamSlug"
password="usaf8fw8fsw21g"

# –ö–†–ò–¢–ò–ß–ù–û: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –í–°–ï–ì–î–ê –≤ —Å—Ç—Ä–æ–≥–æ–º –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:
# Amount ‚Üí Currency ‚Üí OrderId ‚Üí Password ‚Üí TeamSlug
token_params="${amount}${currency}${orderId}${password}${teamSlug}"

echo "–°—Ç—Ä–æ–∫–∞ –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è: $token_params"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: "19200RUB21090usaf8fw8fsw21gMerchantTeamSlug"

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ SHA-256
token=$(echo -n "$token_params" | sha256sum | cut -d' ' -f1)
echo "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω: $token"

# –í–ê–ñ–ù–û: –î–∞–∂–µ –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è, 
# –æ–Ω–∏ –ù–ï —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞:
curl -X POST /api/v1/PaymentInit/init \
  -H "Content-Type: application/json" \
  -d "{
    \"teamSlug\": \"$teamSlug\",
    \"token\": \"$token\",
    \"amount\": $amount,
    \"orderId\": \"$orderId\",
    \"currency\": \"$currency\",
    \"description\": \"–≠—Ç–æ –ø–æ–ª–µ –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ–∫–µ–Ω\",
    \"email\": \"customer@example.com\",
    \"successURL\": \"https://example.com/success\",
    \"failURL\": \"https://example.com/fail\"
  }"
```

#### –ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:

1. **–ò—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å** (–º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ª—é–±—ã–µ –ø–æ–ª—è):
```json
{
  "teamSlug": "MerchantTeamSlug",
  "amount": 19200,
  "orderId": "21090",
  "currency": "RUB",
  "description": "–ü–æ–¥–∞—Ä–æ—á–Ω–∞—è –∫–∞—Ä—Ç–∞",     // ‚ùå –ò–ì–ù–û–†–ò–†–£–ï–¢–°–Ø
  "email": "customer@example.com",      // ‚ùå –ò–ì–ù–û–†–ò–†–£–ï–¢–°–Ø
  "successURL": "https://example.com",  // ‚ùå –ò–ì–ù–û–†–ò–†–£–ï–¢–°–Ø
  "receipt": { ... },                   // ‚ùå –ò–ì–ù–û–†–ò–†–£–ï–¢–°–Ø
  "data": { ... }                       // ‚ùå –ò–ì–ù–û–†–ò–†–£–ï–¢–°–Ø
}
```

2. **–ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** (–¢–û–õ–¨–ö–û 5 –æ—Å–Ω–æ–≤–Ω—ã—Ö):
```
Amount: "19200"     ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø
Currency: "RUB"     ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø
OrderId: "21090"    ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø
TeamSlug: "MerchantTeamSlug"  ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø
```

3. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è**:
```
Amount: "19200"
Currency: "RUB"
OrderId: "21090"
Password: "usaf8fw8fsw21g"  ‚úÖ –î–û–ë–ê–í–õ–Ø–ï–¢–°–Ø –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò
TeamSlug: "MerchantTeamSlug"
```

4. **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫** (Amount ‚Üí Currency ‚Üí OrderId ‚Üí Password ‚Üí TeamSlug):
```
Amount: "19200"
Currency: "RUB"  
OrderId: "21090"
Password: "usaf8fw8fsw21g"
TeamSlug: "MerchantTeamSlug"
```

5. **–ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π**:
```
"19200RUB21090usaf8fw8fsw21gMerchantTeamSlug"
```

6. **SHA-256 —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**:
```
Input:  "19200RUB21090usaf8fw8fsw21gMerchantTeamSlug"
Output: "b8f2f8e5c9d6a4c8f7b5e3a2d1f0e9c8b7a6f5d4e3c2b1a0f9e8d7c6b5a4f3e2"
```

**–ö–ª—é—á–µ–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å**: –ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª–µ–π –≤ JSON, —Ç–æ–∫–µ–Ω –≤—Å–µ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ 5 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤!

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–æ–≤**: –ö–∞–∂–¥—ã–π —Ç–æ–∫–µ–Ω —É–Ω–∏–∫–∞–ª–µ–Ω –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤
- **HTTPS**: –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ HTTPS

---

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–∞ (1xxx)

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | HTTP –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏–µ |
|-----|----------|-------------|----------|
| 1000 | –ù–µ–≤–µ—Ä–Ω–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ | 400 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç JSON |
| 1001 | –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ | 401 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å teamSlug –∏ token |
| 1002 | –î—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –ø–ª–∞—Ç–µ–∂ | 409 | –ò–∑–º–µ–Ω–∏—Ç—å orderId –∏–ª–∏ –¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è |
| 1003 | –ù–µ–≤–µ—Ä–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç | 400 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ |
| 1004 | –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ | 402 | –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å |
| 1005 | –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ | 400 | –£–º–µ–Ω—å—à–∏—Ç—å —Å—É–º–º—É –∏–ª–∏ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π |
| 1006 | –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –≤–∞–ª—é—Ç–∞ | 400 | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RUB, USD –∏–ª–∏ EUR |
| 1007 | –û—à–∏–±–∫–∞ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ | 402 | –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–∑–∂–µ |
| 1100 | –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ | 400 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞ |
| 1404 | –ü–ª–∞—Ç–µ–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω | 404 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å paymentId |
| 1408 | –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è | 408 | –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å |
| 1422 | –ù–∞—Ä—É—à–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª | 422 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
| 1429 | –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ | 429 | –î–æ–∂–¥–∞—Ç—å—Å—è –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å |
| 9998 | –û—à–∏–±–∫–∞ —Å–∏—Å—Ç–µ–º—ã | 500 | –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É |
| 9999 | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ | 500 | –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É |

### –û—à–∏–±–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ (1xxx)

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | HTTP –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏–µ |
|-----|----------|-------------|----------|
| 1000 | –ù–µ–≤–µ—Ä–Ω–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ | 400 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å form–∞—Ç JSON |
| 1001 | –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ | 401 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å teamSlug –∏ token |
| 1003 | –ù–µ–≤–µ—Ä–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç | 400 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å paymentId –∏–ª–∏ orderId |
| 1100 | –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ | 400 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞ |
| 1404 | –ü–ª–∞—Ç–µ–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω | 404 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å paymentId/orderId |
| 1408 | –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è | 408 | –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å |
| 1429 | –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ | 429 | –î–æ–∂–¥–∞—Ç—å—Å—è –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å |
| 9999 | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ | 500 | –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É |

### –û—à–∏–±–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞ (2xxx)

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | HTTP –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏–µ |
|-----|----------|-------------|----------|
| 2000 | –ù–µ–≤–µ—Ä–Ω–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ | 400 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç JSON |
| 2001 | –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ | 401 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å teamSlug –∏ token |
| 2003 | –ù–µ–≤–µ—Ä–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç | 400 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ |
| 2100 | –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ | 400 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞ |
| 2404 | –ü–ª–∞—Ç–µ–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω | 404 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å paymentId |
| 2408 | –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è | 408 | –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å |
| 2409 | –ü–ª–∞—Ç–µ–∂ —É–∂–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω | 409 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞ |
| 2429 | –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ | 429 | –î–æ–∂–¥–∞—Ç—å—Å—è –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å |
| 9999 | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ | 500 | –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É |

### –û—à–∏–±–∫–∏ –æ—Ç–º–µ–Ω—ã –ø–ª–∞—Ç–µ–∂–∞ (3xxx)

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | HTTP –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏–µ |
|-----|----------|-------------|----------|
| 3000 | –ù–µ–≤–µ—Ä–Ω–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ | 400 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç JSON |
| 3001 | –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ | 401 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å teamSlug –∏ token |
| 3003 | –ù–µ–≤–µ—Ä–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç | 400 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ |
| 3100 | –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ | 400 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞ |
| 3404 | –ü–ª–∞—Ç–µ–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω | 404 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å paymentId |
| 3408 | –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è | 408 | –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å |
| 3409 | –ü–ª–∞—Ç–µ–∂ —É–∂–µ –æ—Ç–º–µ–Ω–µ–Ω | 409 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞ |
| 3422 | –ù–∞—Ä—É—à–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª | 422 | –ß–∞—Å—Ç–∏—á–Ω–∞—è –æ—Ç–º–µ–Ω–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| 3429 | –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ | 429 | –î–æ–∂–¥–∞—Ç—å—Å—è –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å |
| 3503 | –°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω | 503 | –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–∑–∂–µ |
| 9999 | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ | 500 | –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É |

### –û—à–∏–±–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥—ã (2xxx)

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | HTTP –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏–µ |
|-----|----------|-------------|----------|
| 2001 | –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞ | 400 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ |
| 2002 | TeamSlug —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç | 409 | –í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π teamSlug |
| 2003 | Email —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω | 409 | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π email |
| 2004 | –£—Å–ª–æ–≤–∏—è –Ω–µ –ø—Ä–∏–Ω—è—Ç—ã | 400 | –ü—Ä–∏–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è |
| 2404 | –ö–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ | 404 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å teamSlug |
| 2429 | –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π | 429 | –î–æ–∂–¥–∞—Ç—å—Å—è –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å |
| 9999 | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ | 500 | –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É |

### –û—à–∏–±–∫–∏ –ª–∏–º–∏—Ç–æ–≤ –ø–ª–∞—Ç–µ–∂–µ–π (3xxx)

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | HTTP –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏–µ |
|-----|----------|-------------|----------|
| 3015 | –ò—Å—á–µ—Ä–ø–∞–Ω —Å—É—Ç–æ—á–Ω—ã–π –ª–∏–º–∏—Ç –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–ª–∞—Ç–µ–∂–µ–π | 429 | –î–æ–∂–¥–∞—Ç—å—Å—è —Å–±—Ä–æ—Å–∞ –ª–∏–º–∏—Ç–∞ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É |

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–æ–π "Daily payment limit exceeded"

**–ö–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç:** –û—à–∏–±–∫–∞ —Å –∫–æ–¥–æ–º 3015 –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∫–æ–≥–¥–∞ —Å—É–º–º–∞ —Ç–µ–∫—É—â–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π –∑–∞ –¥–µ–Ω—å + –Ω–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂ –ø—Ä–µ–≤—ã—à–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –∫–æ–º–∞–Ω–¥—ã.

**–§–æ—Ä–º—É–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** `(—Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∏) + (—Å—É–º–º–∞ –Ω–æ–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞) > DailyPaymentLimit`

**–°–ø–æ—Å–æ–±—ã —Ä–µ—à–µ–Ω–∏—è:**

1. **–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:** –û–±–Ω–æ–≤–∏—Ç—å –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç —á–µ—Ä–µ–∑ API
   ```bash
   curl -X PUT "https://gateway.hackload.com/api/v1/TeamRegistration/update/{teamSlug}" \
     -H "Authorization: Bearer {admin-token}" \
     -H "Content-Type: application/json" \
     -d '{"dailyPaymentLimit": 10000000}'
   ```

2. **–î–ª—è –º–µ—Ä—á–∞–Ω—Ç–æ–≤:** 
   - –î–æ–∂–¥–∞—Ç—å—Å—è —Å–±—Ä–æ—Å–∞ –ª–∏–º–∏—Ç–∞ –≤ 00:00 UTC
   - –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞
   - –†–∞–∑–±–∏—Ç—å –∫—Ä—É–ø–Ω—ã–π –ø–ª–∞—Ç–µ–∂ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ–Ω—å—à–∏—Ö (–µ—Å–ª–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)

**–õ–∏–º–∏—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:**
- –ï—Å–ª–∏ `DailyPaymentLimit = null` - –ª–∏–º–∏—Ç –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç: 10,000,000 (10 –º–∏–ª–ª–∏–æ–Ω–æ–≤ –≤ –≤–∞–ª—é—Ç–µ –ø–ª–∞—Ç–µ–∂–∞)
- –î–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ‚â§ –º–µ—Å—è—á–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞

---

## API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã

**POST** `/api/v1/TeamRegistration/register`

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –º–µ—Ä—á–∞–Ω—Ç–∞ –¥–ª—è –ø—Ä–∏–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π.

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Content-Type: application/json
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "teamSlug": "my-online-store",
  "password": "SecurePassword123!",
  "teamName": "My Online Store",
  "email": "merchant@mystore.com",
  "phone": "+1234567890",
  "successURL": "https://mystore.com/payment/success",
  "failURL": "https://mystore.com/payment/fail",
  "notificationURL": "https://mystore.com/payment/webhook",
  "supportedCurrencies": "RUB,USD,EUR",
  "businessInfo": {
    "businessType": "ecommerce",
    "website": "https://mystore.com"
  },
  "acceptTerms": true
}
```

**–û—Ç–≤–µ—Ç (201 Created):**
```json
{
  "success": true,
  "message": "Team registered successfully",
  "teamSlug": "my-online-store",
  "teamId": "123e4567-e89b-12d3-a456-426614174000",
  "passwordHashPreview": "d3ad9315...",
  "createdAt": "2025-08-06T10:30:00Z",
  "status": "ACTIVE",
  "apiEndpoint": "https://gateway.hackload.com/api/v1",
  "details": {
    "teamName": "My Online Store",
    "email": "merchant@mystore.com",
    "supportedCurrencies": ["RUB", "USD", "EUR"],
    "nextSteps": [
      "Test payment initialization using your credentials",
      "Configure webhook endpoint for notifications",
      "Review API documentation for integration"
    ]
  }
}
```

### 1.1. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–º–∞–Ω–¥–µ (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã)

**GET** `/api/v1/TeamRegistration/info/{teamSlug}`

–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–º–∞–Ω–¥–µ/–º–µ—Ä—á–∞–Ω—Ç–µ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ü–µ–ª–µ–π. –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º —Å admin —Ç–æ–∫–µ–Ω–æ–º.

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Authorization: Bearer {admin-token}
```
–∏–ª–∏
```
X-Admin-Token: {admin-token}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL:**
- `{teamSlug}` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–º–∞–Ω–¥—ã

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "id": "123e4567-e89b-12d3-a456-426614174000",
  "teamSlug": "my-online-store",
  "teamName": "My Online Store",
  "isActive": true,
  "createdAt": "2025-08-06T10:30:00Z",
  "updatedAt": "2025-08-16T14:30:00Z",
  "contactEmail": "merchant@mystore.com",
  "contactPhone": "+1234567890",
  "description": "Online store for electronics",
  "secretKey": "sk_live_abc123...",
  "lastPasswordChangeAt": "2025-08-01T00:00:00Z",
  "failedAuthenticationAttempts": 0,
  "lockedUntil": null,
  "lastSuccessfulAuthenticationAt": "2025-08-16T09:15:00Z",
  "lastAuthenticationIpAddress": "192.168.1.100",
  "notificationUrl": "https://mystore.com/webhook",
  "successUrl": "https://mystore.com/success",
  "failUrl": "https://mystore.com/fail",
  "cancelUrl": "https://mystore.com/cancel",
  "minPaymentAmount": 1000,
  "maxPaymentAmount": 1000000,
  "dailyPaymentLimit": 5000000,
  "monthlyPaymentLimit": 50000000,
  "dailyTransactionLimit": 100,
  "supportedCurrencies": ["RUB", "USD", "EUR"],
  "supportedPaymentMethods": ["Card"],
  "canProcessRefunds": true,
  "legalName": "My Store LLC",
  "taxId": "1234567890",
  "address": "123 Business St, City, State 12345",
  "country": "RU",
  "timeZone": "Europe/Moscow",
  "processingFeePercentage": 2.5,
  "fixedProcessingFee": 10,
  "feeCurrency": "RUB",
  "settlementDelayDays": 1,
  "settlementAccountNumber": "40817810123456789012",
  "settlementBankCode": "044525225",
  "enableFraudDetection": true,
  "maxFraudScore": 75,
  "requireManualReviewForHighRisk": true,
  "enableRefunds": true,
  "enablePartialRefunds": false,
  "enableReversals": true,
  "enable3DSecure": true,
  "enableTokenization": true,
  "enableRecurringPayments": false,
  "apiVersion": "v1",
  "enableWebhooks": true,
  "webhookRetryAttempts": 3,
  "webhookTimeoutSeconds": 30,
  "webhookSecret": "whsec_abc123...",
  "metadata": {
    "custom_field_1": "value1",
    "integration_version": "1.0"
  },
  "businessInfo": {
    "businessType": "ecommerce",
    "website": "https://mystore.com"
  },
  "usageStats": {
    "totalPayments": 1250,
    "totalPaymentAmount": 15750000,
    "paymentsToday": 45,
    "paymentAmountToday": 450000,
    "paymentsThisMonth": 892,
    "paymentAmountThisMonth": 12500000,
    "totalCustomers": 450,
    "activePaymentMethods": 2,
    "lastPaymentAt": "2025-08-16T14:15:00Z",
    "lastWebhookAt": "2025-08-16T14:16:00Z",
    "failedWebhooksLast24Hours": 2
  },
  "status": {
    "isLocked": false,
    "requiresPasswordChange": false,
    "hasReachedDailyLimit": false,
    "hasReachedMonthlyLimit": false,
    "isHealthy": true,
    "healthIssues": [],
    "warnings": [
      "Approaching daily payment limit (80% reached)"
    ]
  }
}
```

**–û—à–∏–±–∫–∏:**

- **401 Unauthorized** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π admin —Ç–æ–∫–µ–Ω
- **403 Forbidden** - admin —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- **404 Not Found** - –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- **400 Bad Request** - –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç teamSlug
- **500 Internal Server Error** - –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –æ—Ç–≤–µ—Ç–µ:**

- **–ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:** ID, slug, –Ω–∞–∑–≤–∞–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –¥–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** email, —Ç–µ–ª–µ—Ñ–æ–Ω, –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:** —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á, –∏—Å—Ç–æ—Ä–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π:** –ª–∏–º–∏—Ç—ã, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–∞–ª—é—Ç—ã –∏ –º–µ—Ç–æ–¥—ã
- **–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:** —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ, –Ω–∞–ª–æ–≥–æ–≤—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã, –∞–¥—Ä–µ—Å
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–∏—Å—Å–∏–π:** –ø—Ä–æ—Ü–µ–Ω—Ç –∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è:** –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã, –∑–∞–¥–µ—Ä–∂–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:** –∞–Ω—Ç–∏—Ñ—Ä–æ–¥, –ª–∏–º–∏—Ç—ã –ø–æ —Ä–∏—Å–∫–∞–º
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏:** –≤–æ–∑–≤—Ä–∞—Ç—ã, 3D Secure, —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è, —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
- **API –∏ webhook –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:** –≤–µ—Ä—Å–∏—è API, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è –∏ –±–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ —Å—É–º–º—ã –ø–ª–∞—Ç–µ–∂–µ–π –∑–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã
- **–°—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤—å—è:** –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ–±–ª–µ–º –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -H "Authorization: Bearer admin_token_here" \
     "https://gateway.hackload.com/api/v1/TeamRegistration/info/my-online-store"
```

### 1.2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–º–∞–Ω–¥—ã (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã)

**PUT** `/api/v1/TeamRegistration/update/{teamSlug}`

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥—ã/–º–µ—Ä—á–∞–Ω—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –ø–ª–∞—Ç–µ–∂–µ–π. –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º —Å admin —Ç–æ–∫–µ–Ω–æ–º.

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Content-Type: application/json
Authorization: Bearer {admin-token}
```
–∏–ª–∏
```
Content-Type: application/json
X-Admin-Token: {admin-token}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL:**
- `{teamSlug}` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–º–∞–Ω–¥—ã

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (–≤—Å–µ –ø–æ–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã):**
```json
{
  "teamName": "Updated Store Name",
  "email": "newemail@mystore.com",
  "phone": "+1234567891",
  "successURL": "https://mystore.com/new-success",
  "failURL": "https://mystore.com/new-fail",
  "notificationURL": "https://mystore.com/new-webhook",
  "supportedCurrencies": "RUB,USD,EUR,KZT",
  "businessInfo": {
    "businessType": "marketplace",
    "website": "https://newstore.com"
  },
  "minPaymentAmount": 1000,
  "maxPaymentAmount": 1000000,
  "dailyPaymentLimit": 5000000,
  "monthlyPaymentLimit": 50000000,
  "dailyTransactionLimit": 100
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "success": true,
  "message": "Team updated successfully",
  "teamSlug": "my-online-store",
  "teamId": "123e4567-e89b-12d3-a456-426614174000",
  "updatedAt": "2025-08-16T14:30:00Z",
  "updatedFields": [
    "dailyPaymentLimit",
    "monthlyPaymentLimit", 
    "email"
  ]
}
```

**–û—à–∏–±–∫–∏:**

- **401 Unauthorized** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π admin —Ç–æ–∫–µ–Ω
- **403 Forbidden** - admin —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- **404 Not Found** - –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- **400 Bad Request** - –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ª–∏–º–∏—Ç–æ–≤:**
- Daily limit ‚â§ 10,000,000 (10M –º–∞–∫—Å–∏–º—É–º)
- Daily limit ‚â§ Monthly limit (–µ—Å–ª–∏ –æ–±–∞ –∑–∞–¥–∞–Ω—ã)
- Min payment ‚â§ Max payment (–µ—Å–ª–∏ –æ–±–∞ –∑–∞–¥–∞–Ω—ã)
- –í—Å–µ —Å—É–º–º—ã ‚â• 0

**–ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–Ω–µ–≤–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞:**
```bash
curl -X PUT "https://gateway.hackload.com/api/v1/TeamRegistration/update/my-store" \
  -H "Authorization: Bearer admin_token_here" \
  -H "Content-Type: application/json" \
  -d '{
    "dailyPaymentLimit": 500000
  }'
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞

**POST** `/api/v1/PaymentInit/init`

–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –Ω–∞–º–µ—Ä–µ–Ω–∏—è.

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Content-Type: application/json
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "teamSlug": "my-store",
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "amount": 150000,
  "orderId": "order-12345",
  "currency": "RUB",
  "description": "Book purchase",
  "successURL": "https://mystore.com/success",
  "failURL": "https://mystore.com/fail",
  "notificationURL": "https://mystore.com/webhook",
  "paymentExpiry": 30,
  "email": "customer@example.com",
  "language": "ru"
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "success": true,
  "paymentId": "pay_123456789",
  "orderId": "order-12345",
  "status": "NEW",
  "amount": 150000,
  "currency": "RUB",
  "paymentURL": "https://gateway.hackload.com/payment/pay_123456789",
  "expiresAt": "2025-01-30T12:30:00Z",
  "createdAt": "2025-01-30T12:00:00Z"
}
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞

**POST** `/api/v1/PaymentCheck/check`

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞ –ø–æ PaymentId –∏–ª–∏ OrderId.

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Content-Type: application/json
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (–ø–æ PaymentId):**
```json
{
  "teamSlug": "my-store",
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "paymentId": "pay_123456789",
  "includeTransactions": true,
  "includeCardDetails": true,
  "includeCustomerInfo": false,
  "includeReceipt": false,
  "language": "ru"
}
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (–ø–æ OrderId):**
```json
{
  "teamSlug": "my-store",
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "orderId": "order-12345",
  "includeTransactions": false,
  "includeCardDetails": false,
  "includeCustomerInfo": true,
  "includeReceipt": true,
  "language": "en"
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "success": true,
  "payments": [
    {
      "paymentId": "pay_123456789",
      "orderId": "order-12345",
      "status": "CONFIRMED",
      "statusDescription": "Payment confirmed successfully",
      "amount": 150000,
      "currency": "RUB",
      "createdAt": "2025-01-30T12:00:00Z",
      "updatedAt": "2025-01-30T12:05:00Z",
      "expiresAt": "2025-01-30T12:30:00Z",
      "description": "Book purchase",
      "payType": "O"
    }
  ],
  "totalCount": 1,
  "orderId": "order-12345"
}
```

### 4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞

**POST** `/api/v1/PaymentConfirm/confirm`

–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞ –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤.

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Content-Type: application/json
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "teamSlug": "my-store",
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "paymentId": "pay_123456789",
  "amount": 150000,
  "description": "Order confirmation for books",
  "receipt": {
    "email": "customer@example.com",
    "phone": "+79001234567"
  },
  "data": {
    "confirmationReason": "Customer payment approved",
    "merchantReference": "ORDER-12345"
  }
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "success": true,
  "paymentId": "pay_123456789",
  "orderId": "order-12345",
  "status": "CONFIRMED",
  "authorizedAmount": 150000,
  "confirmedAmount": 150000,
  "remainingAmount": 0,
  "currency": "RUB",
  "confirmedAt": "2025-01-30T12:05:00Z",
  "bankDetails": {
    "bankTransactionId": "bank_txn_789",
    "authorizationCode": "AUTH123",
    "rrn": "123456789012",
    "responseCode": "00",
    "responseMessage": "Approved"
  },
  "fees": {
    "processingFee": 3000,
    "totalFees": 3000,
    "feeCurrency": "RUB"
  },
  "settlement": {
    "settlementDate": "2025-01-31T00:00:00Z",
    "settlementAmount": 147000,
    "settlementCurrency": "RUB"
  }
}
```

### 5. –ü–ª–∞—Ç–µ–∂–Ω–∞—è —Ñ–æ—Ä–º–∞ (PaymentForm)

**GET** `/api/v1/paymentform/render/{paymentId}`

–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ñ–æ—Ä–º—ã –¥–ª—è –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–º.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL:**
- `{paymentId}` - ID –ø–ª–∞—Ç–µ–∂–∞, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞
- `?lang=en|ru` - —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `en`)

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Accept: text/html
```

**–û—Ç–≤–µ—Ç (200 OK):**
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Ñ–æ—Ä–º–æ–π, —Å–æ–¥–µ—Ä–∂–∞—â–µ–π:
- –§–æ—Ä–º—É –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–ª–∞—Ç–µ–∂–µ (—Å—É–º–º–∞, –æ–ø–∏—Å–∞–Ω–∏–µ, –º–µ—Ä—á–∞–Ω—Ç)
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (SSL, PCI DSS)
- –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- CSRF-–∑–∞—â–∏—Ç—É

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ñ–æ—Ä–º—ã:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∫–∞—Ä—Ç—ã –ø–æ –Ω–æ–º–µ—Ä—É
- Real-time –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç—ã –∏ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É –õ—É–Ω–∞
- –ó–∞—â–∏—Ç–∞ –æ—Ç XSS –∏ CSRF –∞—Ç–∞–∫

**POST** `/api/v1/paymentform/submit`

–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç—ã, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Ñ–æ—Ä–º—ã.

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Content-Type: application/x-www-form-urlencoded
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```
PaymentId=pmt_abc123&CardNumber=4111111111111111&ExpiryDate=12%2F25&Cvv=123&CardholderName=John+Doe&Email=customer%40example.com&Phone=%2B79001234567&SaveCard=false&TermsAgreement=true&CsrfToken=csrf_token_value
```

**–û—Ç–≤–µ—Ç (200 OK) - –£—Å–ø–µ—Ö:**
–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—Ç HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º.

**–û—Ç–≤–µ—Ç (400 Bad Request) - –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**
```json
{
  "error": "Validation failed",
  "details": [
    "Card number is required",
    "Invalid CVV format"
  ],
  "paymentId": "pmt_abc123"
}
```

**GET** `/api/v1/paymentform/result/{paymentId}`

–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL:**
- `{paymentId}` - ID –ø–ª–∞—Ç–µ–∂–∞
- `?success=true|false` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `?message=text` - —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ

**–û—Ç–≤–µ—Ç (200 OK):**
HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–ª–∞—Ç–µ–∂–∞ –∏ –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –º–µ—Ä—á–∞–Ω—Ç—É.

### 6. –û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞

**POST** `/api/v1/PaymentCancel/cancel`

–û—Ç–º–µ–Ω–∞, —Ä–µ–≤–µ—Ä—Å –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—Ç –ø–ª–∞—Ç–µ–∂–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞.

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Content-Type: application/json
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "teamSlug": "my-store",
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "paymentId": "pay_123456789",
  "reason": "Customer requested cancellation",
  "receipt": {
    "email": "customer@example.com",
    "phone": "+79001234567",
    "taxation": "osn"
  },
  "force": false,
  "data": {
    "externalRequestId": "cancel_req_12345",
    "customerReason": "Changed mind",
    "merchantReference": "CANCEL-ORDER-12345"
  }
}
```

**–û—Ç–≤–µ—Ç (200 OK) - –í–æ–∑–≤—Ä–∞—Ç:**
```json
{
  "success": true,
  "paymentId": "pay_123456789",
  "orderId": "order-12345",
  "status": "REFUNDED",
  "cancellationType": "FULL_REFUND",
  "originalAmount": 150000,
  "cancelledAmount": 150000,
  "remainingAmount": 0,
  "currency": "RUB",
  "cancelledAt": "2025-01-30T12:10:00Z",
  "bankDetails": {
    "bankTransactionId": "bank_cancel_789",
    "originalAuthorizationCode": "AUTH123",
    "cancellationAuthorizationCode": "REFUND456",
    "rrn": "123456789012",
    "responseCode": "00",
    "responseMessage": "Refund Approved"
  },
  "refund": {
    "refundId": "refund_789",
    "refundStatus": "PROCESSING",
    "expectedProcessingTime": "3-5 business days",
    "refundMethod": "card",
    "cardInfo": {
      "cardMask": "4111****1111",
      "cardType": "Visa",
      "issuingBank": "Sberbank"
    }
  },
  "details": {
    "reason": "Customer requested cancellation",
    "wasForced": false,
    "processingDuration": "00:00:01.250"
  }
}
```


---

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Ñ–æ—Ä–º–æ–π

```bash
#!/bin/bash

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–ª–∞—Ç–µ–∂–∞
team_slug="my-test-store"
password="MySecretPassword123"
amount="250000"
order_id="order-$(date +%s)"
currency="RUB"
description="Test payment"
email="customer@example.com"
success_url="https://mystore.com/success"
fail_url="https://mystore.com/fail"
notification_url="https://mystore.com/webhook"

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞: —Ç–æ–ª—å–∫–æ 5 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
token_params="${amount}${currency}${order_id}${password}${team_slug}"
token=$(echo -n "$token_params" | sha256sum | cut -d' ' -f1)

echo "–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞..."

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
response=$(curl -s -X POST https://gateway.hackload.com/api/v1/PaymentInit/init \
  -H "Content-Type: application/json" \
  -d "{
    \"teamSlug\": \"$team_slug\",
    \"token\": \"$token\",
    \"amount\": $amount,
    \"orderId\": \"$order_id\",
    \"currency\": \"$currency\",
    \"description\": \"$description\",
    \"email\": \"$email\",
    \"successURL\": \"$success_url\",
    \"failURL\": \"$fail_url\",
    \"notificationURL\": \"$notification_url\",
    \"language\": \"ru\"
  }")

echo "–û—Ç–≤–µ—Ç API: $response"

# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ paymentURL –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
payment_url=$(echo "$response" | jq -r '.paymentURL // empty')

if [ ! -z "$payment_url" ]; then
    echo "‚úÖ –ü–ª–∞—Ç–µ–∂ —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!"
    echo "üîó –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤—å—Ç–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –Ω–∞: $payment_url"
    echo ""
    echo "–ü–æ–∫—É–ø–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç –∑–∞—â–∏—â–µ–Ω–Ω—É—é —Ñ–æ—Ä–º—É –¥–ª—è –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç—ã."
    echo "–ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞—Ä—Ç—ã —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –Ω–∞ successURL –∏–ª–∏ failURL."
    echo "Webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞: $notification_url"
else
    echo "‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞: $response"
fi
```

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ —Å –ø–æ–ª–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π (—Å—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥)

```bash
#!/bin/bash

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–ª–∞—Ç–µ–∂–∞
team_slug="my-test-store"
password="MySecretPassword123"
amount="250000"
order_id="order-$(date +%s)"
currency="RUB"
description="Test payment"
email="customer@example.com"
success_url="https://mystore.com/success"
fail_url="https://mystore.com/fail"

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ - –£–°–¢–ê–†–ï–í–®–ò–ô –ú–ï–¢–û–î)
token_params="${amount}${currency}${description}${email}${fail_url}${order_id}${success_url}${team_slug}${password}"
token=$(echo -n "$token_params" | sha256sum | cut -d' ' -f1)

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
curl -X POST https://gateway.hackload.com/api/v1/PaymentInit/init \
  -H "Content-Type: application/json" \
  -d "{
    \"teamSlug\": \"$team_slug\",
    \"token\": \"$token\",
    \"amount\": $amount,
    \"orderId\": \"$order_id\",
    \"currency\": \"$currency\",
    \"description\": \"$description\",
    \"email\": \"$email\",
    \"successURL\": \"$success_url\",
    \"failURL\": \"$fail_url\",
    \"language\": \"ru\"
  }"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞

```bash
#!/bin/bash

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
team_slug="my-test-store"
password="MySecretPassword123"
payment_id="pay_123456789"

# –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ô —Ç–æ–∫–µ–Ω –¥–ª—è PaymentCheck (PaymentId + Password + TeamSlug)
# ‚ö†Ô∏è –í–ê–ñ–ù–û: –ù–ï –∞–ª—Ñ–∞–≤–∏—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫! PaymentId ‚Üí Password ‚Üí TeamSlug
token_params="${payment_id}${password}${team_slug}"
token=$(echo -n "$token_params" | sha256sum | cut -d' ' -f1)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
curl -X POST https://gateway.hackload.com/api/v1/PaymentCheck/check \
  -H "Content-Type: application/json" \
  -d "{
    \"teamSlug\": \"$team_slug\",
    \"token\": \"$token\",
    \"paymentId\": \"$payment_id\",
    \"includeTransactions\": true,
    \"includeCardDetails\": true,
    \"language\": \"ru\"
  }"
```

### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞

```bash
#!/bin/bash

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
team_slug="my-test-store"
password="MySecretPassword123"
payment_id="pay_123456789"
amount="250000"

# –¢–æ–∫–µ–Ω –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
token_params="${amount}${payment_id}${team_slug}${password}"
token=$(echo -n "$token_params" | sha256sum | cut -d' ' -f1)

# –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
curl -X POST https://gateway.hackload.com/api/v1/PaymentConfirm/confirm \
  -H "Content-Type: application/json" \
  -d "{
    \"teamSlug\": \"$team_slug\",
    \"token\": \"$token\",
    \"paymentId\": \"$payment_id\",
    \"amount\": $amount,
    \"description\": \"Order confirmation\"
  }"
```

### –û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞

```bash
#!/bin/bash

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –æ—Ç–º–µ–Ω—ã
team_slug="my-test-store"
password="MySecretPassword123"
payment_id="pay_123456789"
reason="Customer requested cancellation"

# –¢–æ–∫–µ–Ω –¥–ª—è –æ—Ç–º–µ–Ω—ã
token_params="${payment_id}${team_slug}${password}"
token=$(echo -n "$token_params" | sha256sum | cut -d' ' -f1)

# –û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞
curl -X POST https://gateway.hackload.com/api/v1/PaymentCancel/cancel \
  -H "Content-Type: application/json" \
  -d "{
    \"teamSlug\": \"$team_slug\",
    \"token\": \"$token\",
    \"paymentId\": \"$payment_id\",
    \"reason\": \"$reason\"
  }"
```

## Webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —à–ª—é–∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç HTTP-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (webhooks) –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π URL –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω—É –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–æ–±—ã—Ç–∏—è –ø–ª–∞—Ç–µ–∂–µ–π –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –æ–ø—Ä–æ—Å–∞ API.

### –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

Webhook –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ **–∫–∞–∂–¥–æ–º** –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:

#### –°—Ü–µ–Ω–∞—Ä–∏–π –ø–æ–ª–Ω–æ–≥–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ø–ª–∞—Ç–µ–∂–∞

**1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞** - `POST /api/v1/PaymentInit/init`
```json
{
  "teamSlug": "my-store",
  "amount": 150000,
  "orderId": "order-12345",
  "currency": "RUB",
  "notificationURL": "https://mystore.com/webhook"
}
```
**Webhook:** –ü–µ—Ä–µ—Ö–æ–¥ `INIT` ‚Üí `NEW`
```json
{
  "paymentId": "pmt_abc123",
  "status": "NEW",
  "teamSlug": "my-store",
  "timestamp": "2025-01-15T10:30:00Z",
  "data": {
    "transition_timestamp": "2025-01-15T10:30:00Z",
    "status_name": "NEW"
  }
}
```

**2. –ü–æ–∫—É–ø–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –ø–ª–∞—Ç–µ–∂–Ω—É—é —Ñ–æ—Ä–º—É**

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ `paymentURL` –∏–∑ –æ—Ç–≤–µ—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä:
```
https://gateway.hackload.com/api/v1/paymentform/render/pmt_abc123?lang=ru
```

**–ü–ª–∞—Ç–µ–∂–Ω–∞—è —Ñ–æ—Ä–º–∞** - `GET /api/v1/paymentform/render/{paymentId}`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ñ–æ—Ä–º—ã –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç—ã
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL**: 
  - `{paymentId}` - ID –ø–ª–∞—Ç–µ–∂–∞ –∏–∑ –æ—Ç–≤–µ—Ç–∞ PaymentInit
  - `?lang=en|ru` - —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: PCI DSS compliant, SSL-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, –∑–∞—â–∏—Ç–∞ –æ—Ç XSS/CSRF
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–∞—Ä—Ç—ã**: Visa, MasterCard, American Express, Discover, JCB, Diners Club, UnionPay, Mir

**–¢–µ—Å—Ç–æ–≤—ã–µ –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
- **4111111111111111** (Visa) - —É—Å–ø–µ—à–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **5555555555554444** (MasterCard) - —É—Å–ø–µ—à–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞  
- **4000000000000002** - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –±–∞–Ω–∫–æ–º
- **4000000000000119** - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤

**3. –ü–æ–∫—É–ø–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã** - `POST /api/v1/paymentform/submit`

–§–æ—Ä–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏:
```json
{
  "PaymentId": "pmt_abc123",
  "CardNumber": "4111111111111111",
  "ExpiryDate": "12/25",
  "Cvv": "123",
  "CardholderName": "John Doe",
  "Email": "customer@example.com",
  "Phone": "+79001234567",
  "SaveCard": false,
  "TermsAgreement": true,
  "CsrfToken": "csrf_token_here"
}
```

**Webhook #1:** –ü–µ—Ä–µ—Ö–æ–¥ `NEW` ‚Üí `FORM_SHOWED` (–ø–æ–∫—É–ø–∞—Ç–µ–ª—å –Ω–∞—á–∞–ª –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã)
```json
{
  "paymentId": "pmt_abc123",
  "status": "FORM_SHOWED",
  "teamSlug": "my-store",
  "timestamp": "2025-01-15T10:30:15Z",
  "data": {
    "transition_timestamp": "2025-01-15T10:30:15Z",
    "status_name": "FORM_SHOWED"
  }
}
```

**Webhook #2:** –ü–µ—Ä–µ—Ö–æ–¥ `FORM_SHOWED` ‚Üí `AUTHORIZED` (–∫–∞—Ä—Ç–∞ —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞)
```json
{
  "paymentId": "pmt_abc123",
  "status": "AUTHORIZED",
  "teamSlug": "my-store",
  "timestamp": "2025-01-15T10:30:45Z",
  "data": {
    "transition_timestamp": "2025-01-15T10:30:45Z",
    "status_name": "AUTHORIZED"
  }
}
```

**–ï—Å–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Ä—Ç—ã –Ω–µ—É–¥–∞—á–Ω–∞:**
**Webhook #2 (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π):** –ü–µ—Ä–µ—Ö–æ–¥ `FORM_SHOWED` ‚Üí `REJECTED` (–æ—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞—Ä—Ç—ã)
```json
{
  "paymentId": "pmt_abc123",
  "status": "failed",
  "teamSlug": "my-store",
  "timestamp": "2025-01-15T10:30:50Z",
  "data": {
    "event_type": "payment_failed",
    "failure_reason": "REJECTED"
  }
}
```

**3. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞** - `POST /api/v1/PaymentConfirm/confirm`
**Webhook:** –ü–µ—Ä–µ—Ö–æ–¥ `AUTHORIZED` ‚Üí `CONFIRMED` (–û–°–û–ë–´–ô —Å–ª—É—á–∞–π - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏)
```json
{
  "paymentId": "pmt_abc123",
  "status": "completed",
  "teamSlug": "my-store",
  "timestamp": "2025-01-15T10:31:00Z",
  "data": {
    "event_type": "payment_completed"
  }
}
```

**HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ webhook:**
```
X-Webhook-Signature: sha256=a1b2c3d4e5f6...
X-Webhook-Event: payment_completed
X-Webhook-Delivery: uuid-123e4567-e89b-12d3-a456-426614174000
User-Agent: PaymentGateway-Webhook/1.0
Content-Type: application/json
```

#### –°—Ü–µ–Ω–∞—Ä–∏–∏ –æ—à–∏–±–æ–∫

**–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ –±–∞–Ω–∫–æ–º**
**Webhook:** –ü–µ—Ä–µ—Ö–æ–¥ `FORM_SHOWED` ‚Üí `REJECTED`
```json
{
  "paymentId": "pmt_abc123",
  "status": "failed",
  "teamSlug": "my-store",
  "timestamp": "2025-01-15T10:30:50Z",
  "data": {
    "event_type": "payment_failed",
    "failure_reason": "REJECTED"
  }
}
```

**–û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞** - `POST /api/v1/PaymentCancel/cancel`
**Webhook:** –ü–µ—Ä–µ—Ö–æ–¥ –∫ `CANCELLED`
```json
{
  "paymentId": "pmt_abc123",
  "status": "failed",
  "teamSlug": "my-store",
  "timestamp": "2025-01-15T10:32:00Z",
  "data": {
    "event_type": "payment_failed",
    "failure_reason": "CANCELLED"
  }
}
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å webhook

–ö–∞–∂–¥—ã–π webhook —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥–ø–∏—Å—å HMAC-SHA256 –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ webhook (Node.js)
const crypto = require('crypto');

function verifyWebhookSignature(payload, signature, secret) {
  const expectedSignature = crypto
    .createHmac('sha256', secret)
    .update(JSON.stringify(payload))
    .digest('hex');
  
  return signature === `sha256=${expectedSignature}`;
}
```

### Retry-–ª–æ–≥–∏–∫–∞

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É webhook –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö:
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫:** –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3)
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª—ã:** –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (1—Å, 2—Å, 4—Å, 8—Å...)
- **Timeout:** –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 —Å–µ–∫—É–Ω–¥)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

```javascript
// –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Node.js)
const express = require('express');
const crypto = require('crypto');
const app = express();

app.use(express.json());

// Webhook endpoint
app.post('/payment/webhook', (req, res) => {
  const payment = req.body;
  const signature = req.headers['x-webhook-signature'];
  const eventType = req.headers['x-webhook-event'];
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à webhook secret)
  const webhookSecret = 'your-webhook-secret-from-team-settings';
  const isValid = verifyWebhookSignature(req.body, signature, webhookSecret);
  
  if (!isValid) {
    console.error('Invalid webhook signature');
    return res.status(401).json({ error: 'Invalid signature' });
  }
  
  // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  console.log('Payment notification received:', {
    paymentId: payment.paymentId,
    status: payment.status,
    eventType: eventType,
    timestamp: payment.timestamp
  });
  
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤
  switch (payment.status) {
    case 'completed':
    case 'CONFIRMED':
      // –ü–ª–∞—Ç–µ–∂ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–∫–∞–∑
      processOrder(payment.paymentId);
      break;
      
    case 'failed':
    case 'REJECTED':
    case 'CANCELLED':
    case 'EXPIRED':
      // –ü–ª–∞—Ç–µ–∂ –Ω–µ –ø—Ä–æ—à–µ–ª - —É–≤–µ–¥–æ–º–∏—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
      notifyPaymentFailure(payment.paymentId, payment.data?.failure_reason);
      break;
      
    case 'AUTHORIZED':
      // –ü–ª–∞—Ç–µ–∂ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω - –º–æ–∂–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å
      handlePaymentAuthorized(payment.paymentId);
      break;
      
    case 'NEW':
    case 'FORM_SHOWED':
      // –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã - –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å UI
      updatePaymentStatus(payment.paymentId, payment.status);
      break;
  }
  
  // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è webhook
  res.status(200).json({ received: true });
});

function verifyWebhookSignature(payload, signature, secret) {
  if (!signature || !signature.startsWith('sha256=')) {
    return false;
  }
  
  const expectedSignature = crypto
    .createHmac('sha256', secret)
    .update(JSON.stringify(payload))
    .digest('hex');
  
  return signature === `sha256=${expectedSignature}`;
}

function processOrder(paymentId) {
  console.log(`‚úÖ Processing order for payment ${paymentId}`);
  // –õ–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞:
  // - –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–≤–∞—Ä–∞
  // - –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ–∫–∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª—é
  // - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
}

function notifyPaymentFailure(paymentId, reason) {
  console.log(`‚ùå Payment failed: ${paymentId}, reason: ${reason}`);
  // –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—É–¥–∞—á–Ω–æ–π –æ–ø–ª–∞—Ç—ã:
  // - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
  // - –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
  // - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
}

function handlePaymentAuthorized(paymentId) {
  console.log(`üîÑ Payment authorized: ${paymentId}`);
  // –ü–ª–∞—Ç–µ–∂ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –º–æ–∂–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å —á–µ—Ä–µ–∑ API
  // confirmPayment(paymentId);
}

function updatePaymentStatus(paymentId, status) {
  console.log(`üìä Payment status updated: ${paymentId} -> ${status}`);
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤ UI –∏–ª–∏ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
}

app.listen(3000, () => {
  console.log('Webhook server running on port 3000');
});
```

### –û—Ç–ª–∞–¥–∫–∞ webhook

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è –ø—Ä–æ–±—Ä–æ—Å–∞ localhost
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ngrok
npm install -g ngrok

# –ó–∞–ø—É—Å–∫ —Ç—É–Ω–Ω–µ–ª—è
ngrok http 3000

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π URL –≤ notificationURL
# –ù–∞–ø—Ä–∏–º–µ—Ä: https://abc123.ngrok.io/payment/webhook
```

2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ webhook –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
```javascript
app.post('/payment/webhook', (req, res) => {
  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ webhook –≤ —Ñ–∞–π–ª –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
  const fs = require('fs');
  const logEntry = {
    timestamp: new Date().toISOString(),
    headers: req.headers,
    body: req.body
  };
  
  fs.appendFileSync('webhook.log', JSON.stringify(logEntry) + '\n');
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
});
```

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –¥–æ—Å—Ç–∞–≤–∫—É webhook –≤ –ª–æ–≥–∞—Ö –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —à–ª—é–∑–∞

### –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```python
# Python –ø—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
import hashlib
import requests
import json
from datetime import datetime

class PaymentGatewayClient:
    def __init__(self, team_slug, password, base_url="https://gateway.hackload.com/api/v1"):
        self.team_slug = team_slug
        self.password = password
        self.base_url = base_url
    
    def generate_token(self, params):
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏"""
        # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
        sorted_params = sorted(params.items())
        
        # –ö–æ–Ω–∫–∞—Ç–µ–Ω–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
        token_string = ''.join(str(value) for key, value in sorted_params)
        
        # –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä–æ–ª—å
        token_string += f"{self.password}"
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º SHA-256 —Ö–µ—à
        return hashlib.sha256(token_string.encode()).hexdigest()
    
    def create_payment(self, amount, order_id, currency="RUB", **kwargs):
        """–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞"""
        params = {
            'amount': str(amount),
            'currency': currency,
            'orderId': order_id,
            'teamSlug': self.team_slug
        }
        
        # –î–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
        for key, value in kwargs.items():
            if value is not None:
                params[key] = str(value)
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω
        token = self.generate_token(params)
        
        # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–ø—Ä–æ—Å
        request_data = params.copy()
        request_data['token'] = token
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
        response = requests.post(
            f"{self.base_url}/PaymentInit/init",
            json=request_data,
            headers={'Content-Type': 'application/json'}
        )
        
        return response.json()
    
    def check_payment_status(self, payment_id=None, order_id=None):
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞"""
        params = {
            'teamSlug': self.team_slug
        }
        
        if payment_id:
            params['paymentId'] = payment_id
        elif order_id:
            params['orderId'] = order_id
        else:
            raise ValueError("Either payment_id or order_id must be provided")
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω
        token = self.generate_token(params)
        
        # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–ø—Ä–æ—Å
        request_data = params.copy()
        request_data['token'] = token
        request_data['includeTransactions'] = True
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
        response = requests.post(
            f"{self.base_url}/PaymentCheck/check",
            json=request_data,
            headers={'Content-Type': 'application/json'}
        )
        
        return response.json()
    
    def confirm_payment(self, payment_id, amount):
        """–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞"""
        params = {
            'amount': str(amount),
            'paymentId': payment_id,
            'teamSlug': self.team_slug
        }
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω
        token = self.generate_token(params)
        
        # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–ø—Ä–æ—Å
        request_data = params.copy()
        request_data['token'] = token
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
        response = requests.post(
            f"{self.base_url}/PaymentConfirm/confirm",
            json=request_data,
            headers={'Content-Type': 'application/json'}
        )
        
        return response.json()
    
    def cancel_payment(self, payment_id, reason="API cancellation"):
        """–û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞"""
        params = {
            'paymentId': payment_id,
            'teamSlug': self.team_slug
        }
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω
        token = self.generate_token(params)
        
        # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–ø—Ä–æ—Å
        request_data = params.copy()
        request_data['token'] = token
        request_data['reason'] = reason
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
        response = requests.post(
            f"{self.base_url}/PaymentCancel/cancel",
            json=request_data,
            headers={'Content-Type': 'application/json'}
        )
        
        return response.json()

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
if __name__ == "__main__":
    # –°–æ–∑–¥–∞–µ–º –∫–ª–∏–µ–Ω—Ç–∞
    client = PaymentGatewayClient("my-store", "MySecretPassword123")
    
    # –°–æ–∑–¥–∞–µ–º –ø–ª–∞—Ç–µ–∂
    payment_result = client.create_payment(
        amount=100000,  # 1000 —Ä—É–±–ª–µ–π –≤ –∫–æ–ø–µ–π–∫–∞—Ö
        order_id=f"order-{datetime.now().strftime('%Y%m%d-%H%M%S')}",
        currency="RUB",
        description="Test payment",
        email="customer@example.com",
        successURL="https://mystore.com/success",
        failURL="https://mystore.com/fail"
    )
    
    if payment_result.get('success'):
        payment_id = payment_result['paymentId']
        print(f"Payment created: {payment_id}")
        print(f"Payment URL: {payment_result['paymentURL']}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
        status_result = client.check_payment_status(payment_id=payment_id)
        print(f"Payment status: {status_result}")
        
    else:
        print(f"Payment creation failed: {payment_result}")
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Ñ–æ—Ä–º–æ–π

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ç–æ–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞** (Backend –º–µ—Ä—á–∞–Ω—Ç–∞)
   ```javascript
   // –ù–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ
   const paymentData = {
     teamSlug: "my-store",
     token: generateToken(params),
     amount: 150000, // 1500 —Ä—É–±–ª–µ–π –≤ –∫–æ–ø–µ–π–∫–∞—Ö
     orderId: "order-12345",
     currency: "RUB",
     description: "–ü–æ–∫—É–ø–∫–∞ –∫–Ω–∏–≥",
     email: "customer@example.com",
     successURL: "https://mystore.com/payment/success",
     failURL: "https://mystore.com/payment/fail",
     notificationURL: "https://mystore.com/webhook"
   };
   
   const response = await fetch('https://gateway.hackload.com/api/v1/PaymentInit/init', {
     method: 'POST',
     headers: { 'Content-Type': 'application/json' },
     body: JSON.stringify(paymentData)
   });
   
   const result = await response.json();
   // result.paymentURL - —Å—Å—ã–ª–∫–∞ –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
   ```

2. **–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è** (Frontend –º–µ—Ä—á–∞–Ω—Ç–∞)
   ```javascript
   // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –Ω–∞ –ø–ª–∞—Ç–µ–∂–Ω—É—é —Ñ–æ—Ä–º—É
   window.location.href = result.paymentURL;
   // –ò–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ
   window.open(result.paymentURL, '_blank');
   ```

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞** (Backend –º–µ—Ä—á–∞–Ω—Ç–∞)
   ```javascript
   // Webhook-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —à–ª—é–∑–∞
   app.post('/webhook', (req, res) => {
     const payment = req.body;
     
     if (payment.status === 'completed' || payment.status === 'CONFIRMED') {
       // –ü–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω - –≤—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–∫–∞–∑
       processOrder(payment.paymentId);
     } else if (payment.status === 'failed') {
       // –ü–ª–∞—Ç–µ–∂ –Ω–µ –ø—Ä–æ—à–µ–ª - —É–≤–µ–¥–æ–º–ª—è–µ–º –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
       notifyPaymentFailure(payment.paymentId);
     }
     
     res.status(200).json({ received: true });
   });
   ```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ URL-–∞–¥—Ä–µ—Å–æ–≤ –≤–æ–∑–≤—Ä–∞—Ç–∞

**successURL** - –∫—É–¥–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã:
```
https://mystore.com/payment/success?paymentId={paymentId}&orderId={orderId}
```

**failURL** - –∫—É–¥–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–µ –æ–ø–ª–∞—Ç—ã:
```
https://mystore.com/payment/fail?paymentId={paymentId}&reason={reason}
```

**notificationURL** - –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
```
https://mystore.com/api/payment/webhook
```

### –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

–ü–ª–∞—Ç–µ–∂–Ω–∞—è —Ñ–æ—Ä–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
- Responsive –¥–∏–∑–∞–π–Ω –¥–ª—è –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è –≤–≤–æ–¥–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä
- Touch-friendly –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–æ—à–µ–ª—å–∫–æ–≤ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1. **HTTPS –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** - –≤—Å–µ URL –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ webhook** - –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–¥–ø–∏—Å—å webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞** - –Ω–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞ client-side –≤–∞–ª–∏–¥–∞—Ü–∏—é
4. **–°–µ–∫—Ä–µ—Ç–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª–µ–π** - –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å –∫–æ–º–∞–Ω–¥—ã –≤ frontend

```javascript
// –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ –Ω–∞ backend
function generateToken(params) {
  const sortedParams = Object.keys(params)
    .sort()
    .map(key => params[key])
    .join('') + process.env.TEAM_PASSWORD;
  
  return crypto.createHash('sha256').update(sortedParams).digest('hex');
}

// –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –ù–ï –¥–µ–ª–∞–π—Ç–µ —Ç–∞–∫!
const token = sha256(params + 'MyPassword123'); // –ü–∞—Ä–æ–ª—å –≤ –∫–æ–¥–µ!
```

---

## –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å –∫–æ–º–∞–Ω–¥—ã –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
2. **Idempotency**: –î–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (externalRequestId, idempotencyKey).
3. **Webhook**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–µ–π.
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã API –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º.
6. **Rate Limiting**: –°–æ–±–ª—é–¥–∞–π—Ç–µ –ª–∏–º–∏—Ç—ã —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.